# 2022-10-13 Naver boostcamp 일일노트 



## Collaborative Filtering (CF)

### 협업 필터링, CF

- 많은 유저들로부터 얻은 정보를 이용해 유저의 관심사를 자동으로 예측
- 더 많은 유저/아이템 데이터가 축적될수록 협업효과 커지고 추천이 정확해질것이란 가정에서 출발함
- 최종목적 : 유저 u가 아이템 i에 부여할 평점을 예측하는 것
- 원리 : 서로 비슷한 취향의 유저들이 선호하는 아이템을 추천



- User-based CF 유저 기반 협업 필터링
  - 유저들끼리의 유사도 구함
- Item-based CF
  - 아이템끼리의 유사도를 구함. 

### Neighborhood-based CF

- Sparsity - 대부분의 행렬 원소는 비어 있다. (유저가 모든 영화를 보는게 아니기 때문)
- NBCF를 적용하려면 적어도 sparsity ratio < 99.5% 이어야 함. 이보다 더 sparse하면 모델 기반 CF (MF 등)를 이용해야 함.



### K-Nearest Neighbors CF (KNN CF) & 유사도 측정

- $$\Omega_i $$ (아이템 $$i$$에 대해 평가를 한 유저 집합) 에 속한 **유저 $$u$$와 가장 유사한 K명의 유저**를 이용해 평점을 예측 
- 유사도 측정법 - 정확한 유사도의 수치를 나타내는 방법
  - 일반적으로는 **거리의 역수** 개념을 사용
  - Mean Squared Difference Similarity
    - 주어진 유저-아이템 rating에 대하여, distance의 평균을 구하고 이를 역수 취함.
    - 역수이므로 분모가 0이 되면 안되므로 1이 더해짐
  - 코사인 유사도
    - 두 벡터의 각도를 이용하여 유사도 구함
  - 피어슨 유사도 (Pearson similarity)
    - 각 벡터를 표본평균으로 정규화한 뒤에 코사인 유사도를 구함
      - 벡터의 크기 차이를 보정해 주는 효과 (3.5~4.0만 주로 레이팅하는 유저 예)
  - 자카드 유사도 (Jaccard similarity) - 집합을 활용한 유사도
    - 두 집합이 같은 아이템을 얼마나 공유하고 있는지를 나타냄
    - 코사인, 피어슨과 달리 차원이 달라도 유사도 계산 가능



어떤 유사도를 사용하는지는 해당 추천시스템의 특징에 따라 정하는 것이 적합하고, 
오프라인 테스트로 가장 좋은 효과를 보이는 유사도를 보통 정한다. 

### Rating

- User Based CF - Absolute Rating

  - 다른 유저들의 아이템에 대한 rating 평균을 냄
  - 나랑 비슷한 유저들에게 가중치를 주어야 하지 않나?
  - Weighted Average 
    - rating을 가중평균 내서 유사도를 구함
  - rating 점수를 그대로 활용하기 때문에, 
    늘 긍정적인 유저, 혹은 늘 부정적인 유저에 따른 rating 차이를 보정하기 힘듬.

- Relative Rating

  - 유저의 평균 평점에서 얼마나 높은지 혹은 낮은지 그 편차(deviation)를 사용함

  - 모든 평점 데이터를 편차 값으로 바꾼 뒤 원래 rating이 아닌 편차 값을 예측한다.

    $$ dev(u,i) = r(u,i) - avg(r_u) $$

- Item based CF

  - User 방식과 거의 동일함. 아이템에 대한 유저들에 대한 rating 평균을 낸다. 



이렇게 평점 계산 완료되면, Top-N 개만 뽑아서 추천해주면 된다.
