# AI 서비스 개발 기초 - Naver boostcamp 8주차 

MLOps, Model Serving, Linux

## *추천 학습 방법
- 1회 강의 들으며 키워드 위주로 필기. 복습.
- 자신의 언어로 꼭 정리하기!
- 뼈대가 있는 강의의 경우 자료를 보지 않고 뼈대를 스스로 떠올려보기
- 뼈대가 없는 강의의 경우 프레임워크의 사용 방법을 충분히 경험하기.
- [오픈소스 코드 분석하기 (참고)](https://zzsza.github.io/development/2020/07/19/opensource-analysis/)
- 수평 학습을 통해 넓게 배우고, 수직 학습을 통해 중요한 곳을 깊이 파기



## MLOps
### MLOps 개론 
1. MLOps란?
   - ML (Machine Learning) + Ops (Operations)
   - 머신러닝 모델 운영하면서 반복적으로 필요 업무를 **자동화**하는 과정
   ![](../images/research_vs_production.png)
   - 연구와 다르게, Production ML은 안정적인 운영 그리고 전체 시스템 구조가 더 중요함.
   - 학습 또한 고정된 구조 및 고정된 데이터는 연구 ML이지만 Production ML은 계속 바뀐다. 

2. MLOps Component  - 타코를 통한 예시
  
  - 인프라
    - 클라우드 / 온 프레미스(직접 서버 설치)
  - Serving
    - Batch Serving : 정기적
    - Online Serving : 실시간
    동시에 여러 경우의 주문이 들어올 수 있는데 이 경우 확장 가능하고 병목 현상 없도록 조치해야함.

  - Experiment / Model Management
    - 실험의 기록 (파라미터, 모델 구조 등) 저장
    - 모델 생성일, 성능, 모델 메타정보 등
    - Experiment management tool
      - **mlflow**
        - 로깅 기능. 협업할 시 도움.
  - Feature store
    - 모델을 만들 때 feature를 추출해 오기 쉬움. 전처리 시간 절약
    - 아직 정형 데이터에서만 많이 쓰이고 있음.
    - [Practitioners Guide to MLOps](https://cloud.google.com/resources/mlops-whitepaper)
    - **feast** 
  - Data Validation
    - (비유) 재료들이 예전에 요리할 때 사용한 재료와 비슷한지 확인할 필요
    - Feature의 분포가 research와 production 사이에 얼마나 다른지 확인
      - Data Drift
        - 시간의 흐름에 따라 모델 성능이 계속 하락함. 즉 refreshing이 필요.
    - **Tensorflow Data Validation (TFDV)**
  - Continuous Training
    - 신선한 재료로 요리를 다시 만든다
    - 학습을 다시 진행
  - Monitoring
    - 모델 지표, 성능 지표 등을 잘 기록해야 함
  - AutoML
    - 시대가 좋아져서 에어프라이어처럼 자동으로 음식 만듬. -> 자동 ML 시스템 구축
  
  >즉 머신러닝 모델을 직접 운영하는 것은 레스토랑 운영과 어느정도 비슷하다.
  
  MLOps는 회사의 상황에 따라 우선순위가 달라지며, 먼저 꼭 진행해야 하는 것은 아니다.
  작은 단위의 MVP(Minimal Value Product)로 시작해서 점차 구축해 나가는 것이 보통이다.

  - 개인 과제 - 강의에서 보고 조금씩 해볼것


## Model Serving
### Web Server Basic
- 크롬에서 유튜브에 접근하는 경우, Request
- 유튜브는 메인 페이지를 반환, Response
- 즉 웹 서버는 HTTP를 통해 웹 브라우저에서 요청하는 HTML 문서나 오브젝트를 전송해 주는 서비스 프로그램
- 요청(Request)를 받으면 요청한 내용을 보내주는 (Response) 프로그램
- **머신러닝 모델 서버**
  - 어떤 데이터를 제공하여 예측해달라고 요청 (Request)하면, 모델을 사용해 예측값을 반환하는 프로그램
  - 


## Linux
**알아둘 명령어들**
>echo 'shell command'

command의 결과를 출력

>cat

특정 파일 내용 출력. 여러 파일을 주면 합쳐서(concat) 출력

>history

쉘 커맨드 히스토리 출력. 번호를 !30, !50 등으로 입력하여 다시 불러내서 활용 가능. 

**표준 스트림**
stdin(0) : 입력
stdout(1) : 출력  
stderr(2) : 에러

'>, >>' : redirection : 출력결과를 저장

'|' : pipe : 출력결과를 다음 입력으로 사용

**서버 쉘 커맨드**
>curl

Client URL, Request를 테스트할 수 있는 명령어.  
웹 서버를 작성한 후 요청이 제대로 실행되는지 확인 가능.
ex) curl -X localhost:5000/
